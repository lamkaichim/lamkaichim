<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg"
     viewBox="0 0 600 100"
     preserveAspectRatio="xMidYMid slice">

  <!-- 背景矩形，占位颜色 -->
  <rect id="bg" width="100%" height="100%" fill="{{COLOR_BG}}"/>
  <set href="#bg" attributeName="fill" to="{{COLOR_BG}}"  begin="seg1draw.begin"/>
  <set href="#bg" attributeName="fill" to="{{COLOR_BG2}}" begin="seg2draw.begin"/>
  <set href="#bg" attributeName="fill" to="{{COLOR_BG3}}" begin="seg3draw.begin"/>
  <set href="#bg" attributeName="fill" to="{{COLOR_BG4}}" begin="seg4draw.begin"/>

  <!-- ───────────── Segment 1 ───────────── -->
  <g id="seg1" visibility="visible">
    <path id="p1" d="M0,50 H0" fill="none"/>

    <!-- 打字 & 删除 -->
    <animate id="seg1draw" href="#p1" attributeName="d"
             values="M0,50 H0;M0,50 H500" dur="2s"
             begin="0s;loop.end+0.1s" fill="freeze"/>
    <animate id="seg1del" href="#p1" attributeName="d"
             values="M0,50 H500;M0,50 H0" dur="1s"
             begin="seg1draw.end+0.5s" fill="freeze"/>

    <!-- 文字 -->
    <text font-family="-apple-system,'Helvetica Neue',system-ui,sans-serif"
          font-weight="bold" font-size="24"
          text-anchor="middle" x="50%" y="50" dominant-baseline="middle" fill="{{COLOR_TEXT1}}">
      <textPath href="#p1">第一段文字</textPath>
      <set attributeName="fill" to="{{COLOR_TEXT1}}" begin="seg1draw.begin"/>
    </text>

    <!-- 光标：附着路径末端，始终跟随字符，并无限闪烁 -->
    <text font-family="-apple-system,'Helvetica Neue',system-ui,sans-serif"
          font-weight="bold" font-size="24"
          text-anchor="middle" x="50%" y="50" dominant-baseline="middle" fill="{{COLOR_TEXT1}}">
      <textPath href="#p1" startOffset="100%">|</textPath>
      <animate attributeName="opacity" values="1;0;1"
               keyTimes="0;0.5;1" dur="1s"
               begin="seg1draw.begin" repeatCount="indefinite"
               calcMode="discrete"/>
    </text>

    <!-- 段结束隐藏 -->
    <set attributeName="visibility" to="hidden"
         begin="seg1del.end+1s"/>
  </g>

  <!-- ───────────── Segment 2 ───────────── -->
  <g id="seg2" visibility="hidden">
    <path id="p2" d="M0,50 H0" fill="none"/>
    <animate id="seg2draw" href="#p2" attributeName="d"
             values="M0,50 H0;M0,50 H500" dur="2s"
             begin="seg1del.end+1s" fill="freeze"/>
    <animate id="seg2del" href="#p2" attributeName="d"
             values="M0,50 H500;M0,50 H0" dur="1s"
             begin="seg2draw.end+0.5s" fill="freeze"/>

    <text font-family="-apple-system,'Helvetica Neue',system-ui,sans-serif"
          font-weight="bold" font-size="24"
          text-anchor="middle" x="50%" y="50" dominant-baseline="middle" fill="{{COLOR_TEXT2}}">
      <textPath href="#p2">第二段文字</textPath>
      <set attributeName="fill" to="{{COLOR_TEXT2}}" begin="seg2draw.begin"/>
    </text>

    <text font-family="-apple-system,'Helvetica Neue',system-ui,sans-serif"
          font-weight="bold" font-size="24"
          text-anchor="middle" x="50%" y="50" dominant-baseline="middle" fill="{{COLOR_TEXT2}}">
      <textPath href="#p2" startOffset="100%">|</textPath>
      <animate attributeName="opacity" values="1;0;1"
               keyTimes="0;0.5;1" dur="1s"
               begin="seg2draw.begin" repeatCount="indefinite"
               calcMode="discrete"/>
    </text>

    <set attributeName="visibility" to="visible" begin="seg1del.end+1s"/>
    <set attributeName="visibility" to="hidden"  begin="seg2del.end+1s"/>
  </g>

  <!-- ───────────── Segment 3 ───────────── -->
  <g id="seg3" visibility="hidden">
    <path id="p3" d="M0,50 H0" fill="none"/>
    <animate id="seg3draw" href="#p3" attributeName="d"
             values="M0,50 H0;M0,50 H500" dur="2s"
             begin="seg2del.end+1s" fill="freeze"/>
    <animate id="seg3del" href="#p3" attributeName="d"
             values="M0,50 H500;M0,50 H0" dur="1s"
             begin="seg3draw.end+0.5s" fill="freeze"/>

    <text font-family="-apple-system,'Helvetica Neue',system-ui,sans-serif"
          font-weight="bold" font-size="24"
          text-anchor="middle" x="50%" y="50" dominant-baseline="middle" fill="{{COLOR_TEXT3}}">
      <textPath href="#p3">第三段文字</textPath>
      <set attributeName="fill" to="{{COLOR_TEXT3}}" begin="seg3draw.begin"/>
    </text>

    <text font-family="-apple-system,'Helvetica Neue',system-ui,sans-serif"
          font-weight="bold" font-size="24"
          text-anchor="middle" x="50%" y="50" dominant-baseline="middle" fill="{{COLOR_TEXT3}}">
      <textPath href="#p3" startOffset="100%">|</textPath>
      <animate attributeName="opacity" values="1;0;1"
               keyTimes="0;0.5;1" dur="1s"
               begin="seg3draw.begin" repeatCount="indefinite"
               calcMode="discrete"/>
    </text>

    <set attributeName="visibility" to="visible" begin="seg2del.end+1s"/>
    <set attributeName="visibility" to="hidden"  begin="seg3del.end+1s"/>
  </g>

  <!-- ───────────── Segment 4 ───────────── -->
  <g id="seg4" visibility="hidden">
    <path id="p4" d="M0,50 H0" fill="none"/>
    <animate id="seg4draw" href="#p4" attributeName="d"
             values="M0,50 H0;M0,50 H500" dur="2s"
             begin="seg3del.end+1s" fill="freeze"/>
    <animate id="seg4del" href="#p4" attributeName="d"
             values="M0,50 H500;M0,50 H0" dur="1s"
             begin="seg4draw.end+0.5s" fill="freeze"/>

    <text font-family="-apple-system,'Helvetica Neue',system-ui,sans-serif"
          font-weight="bold" font-size="24"
          text-anchor="middle" x="50%" y="50" dominant-baseline="middle" fill="{{COLOR_TEXT4}}">
      <textPath href="#p4">第四段文字</textPath>
      <set attributeName="fill" to="{{COLOR_TEXT4}}" begin="seg4draw.begin"/>
    </text>

    <text font-family="-apple-system,'Helvetica Neue',system-ui,sans-serif"
          font-weight="bold" font-size="24"
          text-anchor="middle" x="50%" y="50" dominant-baseline="middle" fill="{{COLOR_TEXT4}}">
      <textPath href="#p4" startOffset="100%">|</textPath>
      <animate attributeName="opacity" values="1;0;1"
               keyTimes="0;0.5;1" dur="1s"
               begin="seg4draw.begin" repeatCount="indefinite"
               calcMode="discrete"/>
    </text>

    <set attributeName="visibility" to="visible" begin="seg3del.end+1s"/>
    <set attributeName="visibility" to="hidden"  begin="seg4del.end+1s"/>
  </g>

  <!-- 循环触发：段4 删除完 0.1s 后触发 loop，loop 结束立即重启段1 -->
  <animate id="loop" href="#p1" attributeName="d"
           begin="seg4del.end+0.1s" dur="0.1s" fill="freeze"/>
</svg>
