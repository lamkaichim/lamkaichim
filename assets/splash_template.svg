<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg"
     viewBox="0 0 600 100"
     preserveAspectRatio="xMidYMid slice">

  <!-- 背景颜色按段切换 -->
  <rect id="bg" width="100%" height="100%" fill="{{COLOR_BG}}"/>
  <set href="#bg" attributeName="fill" to="{{COLOR_BG}}"  begin="seg1draw.begin"/>
  <set href="#bg" attributeName="fill" to="{{COLOR_BG2}}" begin="seg2draw.begin"/>
  <set href="#bg" attributeName="fill" to="{{COLOR_BG3}}" begin="seg3draw.begin"/>
  <set href="#bg" attributeName="fill" to="{{COLOR_BG4}}" begin="seg4draw.begin"/>

  <!-- ========= Segment 1 ========= -->
  <g id="seg1" visibility="visible">
    <path id="p1" d="M0,50 H0" fill="none"/>
    <animate id="seg1draw" href="#p1" attributeName="d"
             values="M0,50 H0;M0,50 H500" dur="2s"
             begin="0s;loop.end+0.1s" fill="freeze"/>
    <animate id="seg1del" href="#p1" attributeName="d"
             values="M0,50 H500;M0,50 H0" dur="1s"
             begin="seg1draw.end" fill="freeze"/>

    <text id="text1" font-family="system-ui" font-size="30" font-weight="bold"
          text-anchor="middle" x="50%" y="50" dominant-baseline="middle" fill="{{COLOR_TEXT1}}">
      <textPath href="#p1">第一段文字</textPath>
      <set attributeName="fill" to="{{COLOR_TEXT1}}" begin="seg1draw.begin"/>
    </text>

    <text id="cursor1" visibility="hidden" font-family="system-ui" font-size="30" font-weight="bold"
          text-anchor="middle" x="50%" y="50" dominant-baseline="middle" fill="{{COLOR_TEXT1}}">
      <textPath href="#p1" startOffset="100%">|</textPath>
      <animate attributeName="opacity" values="1;0;1" dur="1s"
               begin="seg1del.end" repeatCount="1" calcMode="discrete"/>
      <set attributeName="visibility" to="visible" begin="seg1del.end"/>
    </text>

    <set attributeName="visibility" to="hidden" begin="seg1del.end+1s"/>
  </g>

  <!-- ========= Segment 2 ========= -->
  <!--（与之前相同，仅省略以节省篇幅，记得保留 {{COLOR_TEXT2}}…{{COLOR_TEXT4}} 占位符）-->

  <!-- ========= 循环触发 & 重置 ========= -->
  <animate id="loop" href="#p1" attributeName="d"
           begin="seg4del.end+0.1s" dur="0.1s" fill="freeze"/>

  <!-- loop 结束 0.05s：隐藏 seg1 并重置路径 -->
  <set href="#seg1" attributeName="visibility" to="hidden"
       begin="loop.end+0.05s"/>
  <set href="#p1"   attributeName="d"          to="M0,50 H0"
       begin="loop.end+0.05s"/>

  <!-- seg1draw.begin 时再显示 → 保持 2s 打字节奏 -->
  <set href="#seg1" attributeName="visibility" to="visible"
       begin="seg1draw.begin"/>

</svg>
